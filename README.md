# Docker Compose PHP Example
Пример Docker Compose сборки для любого веб-приложения на PHP 8.

## Когда использовать?
Прежде всего, **когда Вы готовы самостоятельно разбираться с Docker**.
Помните, что эта сборка — *всего лишь пример* (хотя и достаточно общий),
который создавался под нужды конкретного проекта. Вы можете использовать его в следующих случаях:

- Когда выбранный фреймворк не предоставляет готовое решение из коробки
- Когда решение из коробки по каким-то причинам Вас не устраивает
- Когда Вы не желаете использовать большие универсальные решения, например, Laradock
- Когда Вы решили перейти на Docker
- Когда Вы не знаете, как начать и Вам нужен пример
- Когда у Вас ещё нет собственных наработок и Вам нужна начальная сборка
- Когда это решение полностью соответствует Вашим потребностям и Вы хотите его переиспользовать

## Состав сборки:
- Nginx
- PHP-FPM
- Xdebug
- Composer
- Git
- PostgreSQL
- Прочие системные библиотеки и PHP-расширения

## Особенности сборки:
- За основу для контейнеров взяты *-alpine образы, дабы обеспечить меньший вес конечной сборки
- Настройки Xdebug заданы в соответствии с PhpStorm IDE
  При необходимости Вы можете их переопределить в `./docker/php-fpm/config/php.ini`
  Подробности смотрите [в документации Xdebug](https://xdebug.org/docs/all_settings)
- Веб-сервер настроен в соответствии с примером [в документации Laravel](https://laravel.com/docs/8.x/deployment#nginx)
- Установлен самоподписанный OpenSSL сертификат

## Как использовать?
1. Скопировать файл `./env.example` в `./env`
2. Создать и запустить контейнеры командой `docker-compose up --build`
3. Перейти по адресу http://localhost:8000 или https://localhost

Пример генерирования нового самоподписанного сертификата:

```
openssl req -newkey rsa:4096 \
            -x509 \
            -sha256 \
            -days 3650 \
            -nodes \
            -out localhost.crt \
            -keyout localhost.key \
            -subj "/C=RU/ST=Perm Krai/L=Perm/O=OpenSSL/OU=0.0.0.0/CN=localhost"
```

Больше информации:
- [Creating a Self-Signed SSL Certificate](https://linuxize.com/post/creating-a-self-signed-ssl-certificate/)
- [Сертификаты для localhost](https://letsencrypt.org/ru/docs/certificates-for-localhost/)

## Лицензия
MIT
